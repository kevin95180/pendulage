{% extends "PendulageAccueilBundle::base.html.twig" %}
{% import "PendulageAccueilBundle::bootstrap.html.twig" as bootstrap%}

{% block title %}PendulageAccueilBundle:Consulter:Lister{% endblock %}

{% block body %}
    <h3>Consultation</h3>

    <form id="form_recherche" action="{{ path('consulter_find') }}" method="post">
        {{ form_widget(form) }}
        <input type="submit" value="Rechercher" />
    </form>
    
    <div class="loading"></div>
    <div id="resultats_recherche">
        {% include 'PendulageAccueilBundle:Consulter:Lister.html.twig' with {'listeConsultation' : listeConsultation}  %}
    </div>

    {% block javascripts %}
{#        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>#}
        
        <script>
            $(".loading").hide();
            $("#form_recherche").submit(function () {
                $(".loading").show();
                var motcle = $("#FindConsultationForm_motcle").val();
                var DATA = 'motcle=' + motcle;
                $.ajax({
                    type: "POST",
                    url: "{{ path('consulter_find')}}",
                    data: DATA,
                    cache: false,
                    success: function (data) {
                        $('#resultats_recherche').html(data);
                        $(".loading").hide();
                    }
                });
                return false;
            });
        </script>
    {% endblock %}

{% endblock %}
